name: {{FRAMEWORK_NAME}}
scheduler:
  principal: {{FRAMEWORK_PRINCIPAL}}
pods:
  nifi:
    count: {{NODE_COUNT}}
    placement: {{NODE_PLACEMENT}}
    user: {{FRAMEWORK_USER}}
    {{#ENABLE_VIRTUAL_NETWORK}}
    networks:
      {{VIRTUAL_NETWORK_NAME}}:
    {{/ENABLE_VIRTUAL_NETWORK}}
    rlimits:
      RLIMIT_NOFILE:
        soft: 50000
        hard: 50000
      RLIMIT_NPROC:
        soft: 10000
        hard: 10000
    uris:
      - {{BOOTSTRAP_URI}}
      - {{NIFI_URI}}
    tasks:
      node:
        goal: RUNNING
        cmd: "./bootstrap && sleep 100"
        cpus: {{NODE_CPUS}}
        memory: {{NODE_MEM}}
        ports:
          http:
            port: 0
            vip:
              prefix: node
              port: 8080
        volumes:
          content-repository:
            path: {{NODE_CONTENT_REPOSITORY_DISK_PATH}}
            type: {{NODE_CONTENT_REPOSITORY_DISK_TYPE}}
            size: {{NODE_CONTENT_REPOSITORY_DISK_SIZE}}
          database-repository:
            path: {{NODE_DATABASE_REPOSITORY_DISK_PATH}}
            type: {{NODE_DATABASE_REPOSITORY_DISK_TYPE}}
            size: {{NODE_DATABASE_REPOSITORY_DISK_SIZE}}
          flowfile-repository:
            path: {{NODE_FLOWFILE_REPOSITORY_DISK_PATH}}
            type: {{NODE_FLOWFILE_REPOSITORY_DISK_TYPE}}
            size: {{NODE_FLOWFILE_REPOSITORY_DISK_SIZE}}
          provenance-repository:
            path: {{NODE_PROVENANCE_REPOSITORY_DISK_PATH}}
            type: {{NODE_PROVENANCE_REPOSITORY_DISK_TYPE}}
            size: {{NODE_PROVENANCE_REPOSITORY_DISK_SIZE}}
        configs:
          nifi.properties:
            template: {{CONFIG_TEMPLATE_PATH}}/nifi.properties.mustache
            dest: nifi-{{NIFI_VERSION}}/conf/nifi.properties
        env:
          NIFI_FLOW_CONFIGURATION_FILE: {{NIFI_FLOW_CONFIGURATION_FILE}}
          NIFI_FLOW_CONFIGURATION_ARCHIVE_ENABLED: {{NIFI_FLOW_CONFIGURATION_ARCHIVE_ENABLED}}
          NIFI_FLOW_CONFIGURATION_ARCHIVE_DIR: {{NIFI_FLOW_CONFIGURATION_ARCHIVE_DIR}}
          NIFI_FLOW_CONFIGURATION_ARCHIVE_MAX_TIME: {{NIFI_FLOW_CONFIGURATION_ARCHIVE_MAX_TIME}}
          NIFI_FLOW_CONFIGURATION_ARCHIVE_MAX_STORAGE: {{NIFI_FLOW_CONFIGURATION_ARCHIVE_MAX_STORAGE}}
          NIFI_FLOW_CONFIGURATION_ARCHIVE_MAX_COUNT: {{NIFI_FLOW_CONFIGURATION_ARCHIVE_MAX_COUNT}}
          NIFI_FLOWCONTROLLER_AUTORESUMESTATE: {{NIFI_FLOWCONTROLLER_AUTORESUMESTATE}}
          NIFI_FLOWCONTROLLER_GRACEFUL_SHUTDOWN_PERIOD: {{NIFI_FLOWCONTROLLER_GRACEFUL_SHUTDOWN_PERIOD}}
          NIFI_FLOWSERVICE_WRITEDELAY_INTERVAL: {{NIFI_FLOWSERVICE_WRITEDELAY_INTERVAL}}
          NIFI_ADMINISTRATIVE_YIELD_DURATION: {{NIFI_ADMINISTRATIVE_YIELD_DURATION}}
          NIFI_BORED_YIELD_DURATION: {{NIFI_BORED_YIELD_DURATION}}
          NIFI_AUTHORIZER_CONFIGURATION_FILE: {{NIFI_AUTHORIZER_CONFIGURATION_FILE}}
          NIFI_LOGIN_IDENTITY_PROVIDER_CONFIGURATION_FILE: {{NIFI_LOGIN_IDENTITY_PROVIDER_CONFIGURATION_FILE}}
          NIFI_TEMPLATES_DIRECTORY: {{NIFI_TEMPLATES_DIRECTORY}}
          NIFI_UI_BANNER_TEXT: {{NIFI_UI_BANNER_TEXT}}
          NIFI_UI_AUTOREFRESH_INTERVAL: {{NIFI_UI_AUTOREFRESH_INTERVAL}}
          NIFI_NAR_LIBRARY_DIRECTORY: {{NIFI_NAR_LIBRARY_DIRECTORY}}
          NIFI_NAR_WORKING_DIRECTORY: {{NIFI_NAR_WORKING_DIRECTORY}}
          NIFI_DOCUMENTATION_WORKING_DIRECTORY: {{NIFI_DOCUMENTATION_WORKING_DIRECTORY}}
          NIFI_PROCESSOR_SCHEDULING_TIMEOUT: {{NIFI_PROCESSOR_SCHEDULING_TIMEOUT}}
          NIFI_STATE_MANAGEMENT_CONFIGURATION_FILE: {{NIFI_STATE_MANAGEMENT_CONFIGURATION_FILE}}
          NIFI_STATE_MANAGEMENT_PROVIDER_LOCAL: {{NIFI_STATE_MANAGEMENT_PROVIDER_LOCAL}}
          NIFI_STATE_MANAGEMENT_PROVIDER_CLUSTER: {{NIFI_STATE_MANAGEMENT_PROVIDER_CLUSTER}}
          NIFI_STATE_MANAGEMENT_EMBEDDED_ZOOKEEPER_START: {{NIFI_STATE_MANAGEMENT_EMBEDDED_ZOOKEEPER_START}}
          NIFI_STATE_MANAGEMENT_EMBEDDED_ZOOKEEPER_PROPERTIES: {{NIFI_STATE_MANAGEMENT_EMBEDDED_ZOOKEEPER_PROPERTIES}}
          NIFI_DATABASE_DIRECTORY: {{NIFI_DATABASE_DIRECTORY}}
          NIFI_H2_URL_APPEND: {{NIFI_H2_URL_APPEND}}
          NIFI_FLOWFILE_REPOSITORY_IMPLEMENTATION: {{NIFI_FLOWFILE_REPOSITORY_IMPLEMENTATION}}
          NIFI_FLOWFILE_REPOSITORY_DIRECTORY: {{NIFI_FLOWFILE_REPOSITORY_DIRECTORY}}
          NIFI_FLOWFILE_REPOSITORY_PARTITIONS: {{NIFI_FLOWFILE_REPOSITORY_PARTITIONS}}
          NIFI_FLOWFILE_REPOSITORY_CHECKPOINT_INTERVAL: {{NIFI_FLOWFILE_REPOSITORY_CHECKPOINT_INTERVAL}}
          NIFI_FLOWFILE_REPOSITORY_ALWAYS_SYNC: {{NIFI_FLOWFILE_REPOSITORY_ALWAYS_SYNC}}
          NIFI_SWAP_MANAGER_IMPLEMENTATION: {{NIFI_SWAP_MANAGER_IMPLEMENTATION}}
          NIFI_QUEUE_SWAP_THRESHOLD: {{NIFI_QUEUE_SWAP_THRESHOLD}}
          NIFI_SWAP_IN_PERIOD: {{NIFI_SWAP_IN_PERIOD}}
          NIFI_SWAP_IN_THREADS: {{NIFI_SWAP_IN_THREADS}}
          NIFI_SWAP_OUT_PERIOD: {{NIFI_SWAP_OUT_PERIOD}}
          NIFI_SWAP_OUT_THREADS: {{NIFI_SWAP_OUT_THREADS}}
          NIFI_CONTENT_REPOSITORY_IMPLEMENTATION: {{NIFI_CONTENT_REPOSITORY_IMPLEMENTATION}}
          NIFI_CONTENT_CLAIM_MAX_APPENDABLE_SIZE: {{NIFI_CONTENT_CLAIM_MAX_APPENDABLE_SIZE}}
          NIFI_CONTENT_CLAIM_MAX_FLOW_FILES: {{NIFI_CONTENT_CLAIM_MAX_FLOW_FILES}}
          NIFI_CONTENT_REPOSITORY_DIRECTORY_DEFAULT: {{NIFI_CONTENT_REPOSITORY_DIRECTORY_DEFAULT}}
          NIFI_CONTENT_REPOSITORY_ARCHIVE_MAX_RETENTION_PERIOD: {{NIFI_CONTENT_REPOSITORY_ARCHIVE_MAX_RETENTION_PERIOD}}
          NIFI_CONTENT_REPOSITORY_ARCHIVE_MAX_USAGE_PERCENTAGE: {{NIFI_CONTENT_REPOSITORY_ARCHIVE_MAX_USAGE_PERCENTAGE}}
          NIFI_CONTENT_REPOSITORY_ARCHIVE_ENABLED: {{NIFI_CONTENT_REPOSITORY_ARCHIVE_ENABLED}}
          NIFI_CONTENT_REPOSITORY_ALWAYS_SYNC: {{NIFI_CONTENT_REPOSITORY_ALWAYS_SYNC}}
          NIFI_CONTENT_VIEWER_URL: {{NIFI_CONTENT_VIEWER_URL}}
          NIFI_PROVENANCE_REPOSITORY_IMPLEMENTATION: {{NIFI_PROVENANCE_REPOSITORY_IMPLEMENTATION}}
          NIFI_PROVENANCE_REPOSITORY_CONCURRENT_MERGE_THREADS: {{NIFI_PROVENANCE_REPOSITORY_CONCURRENT_MERGE_THREADS}}
          NIFI_PROVENANCE_REPOSITORY_WARM_CACHE_FREQUENCY: {{NIFI_PROVENANCE_REPOSITORY_WARM_CACHE_FREQUENCY}}
          NIFI_PROVENANCE_REPOSITORY_DEBUG_FREQUENCY: {{NIFI_PROVENANCE_REPOSITORY_DEBUG_FREQUENCY}}
          NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY_PROVIDER_IMPLEMENTATION: {{NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY_PROVIDER_IMPLEMENTATION}}
          NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY_PROVIDER_LOCATION: {{NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY_PROVIDER_LOCATION}}
          NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY_ID: {{NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY_ID}}
          NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY: {{NIFI_PROVENANCE_REPOSITORY_ENCRYPTION_KEY}}
          NIFI_PROVENANCE_REPOSITORY_DIRECTORY_DEFAULT: {{NIFI_PROVENANCE_REPOSITORY_DIRECTORY_DEFAULT}}
          NIFI_PROVENANCE_REPOSITORY_MAX_STORAGE_TIME: {{NIFI_PROVENANCE_REPOSITORY_MAX_STORAGE_TIME}}
          NIFI_PROVENANCE_REPOSITORY_MAX_STORAGE_SIZE: {{NIFI_PROVENANCE_REPOSITORY_MAX_STORAGE_SIZE}}
          NIFI_PROVENANCE_REPOSITORY_ROLLOVER_TIME: {{NIFI_PROVENANCE_REPOSITORY_ROLLOVER_TIME}}
          NIFI_PROVENANCE_REPOSITORY_ROLLOVER_SIZE: {{NIFI_PROVENANCE_REPOSITORY_ROLLOVER_SIZE}}
          NIFI_PROVENANCE_REPOSITORY_QUERY_THREADS: {{NIFI_PROVENANCE_REPOSITORY_QUERY_THREADS}}
          NIFI_PROVENANCE_REPOSITORY_INDEX_THREADS: {{NIFI_PROVENANCE_REPOSITORY_INDEX_THREADS}}
          NIFI_PROVENANCE_REPOSITORY_COMPRESS_ON_ROLLOVER: {{NIFI_PROVENANCE_REPOSITORY_COMPRESS_ON_ROLLOVER}}
          NIFI_PROVENANCE_REPOSITORY_ALWAYS_SYNC: {{NIFI_PROVENANCE_REPOSITORY_ALWAYS_SYNC}}
          NIFI_PROVENANCE_REPOSITORY_JOURNAL_COUNT: {{NIFI_PROVENANCE_REPOSITORY_JOURNAL_COUNT}}
          NIFI_PROVENANCE_REPOSITORY_INDEXED_FIELDS: {{NIFI_PROVENANCE_REPOSITORY_INDEXED_FIELDS}}
          NIFI_PROVENANCE_REPOSITORY_INDEXED_ATTRIBUTES: {{NIFI_PROVENANCE_REPOSITORY_INDEXED_ATTRIBUTES}}
          NIFI_PROVENANCE_REPOSITORY_INDEX_SHARD_SIZE: {{NIFI_PROVENANCE_REPOSITORY_INDEX_SHARD_SIZE}}
          NIFI_PROVENANCE_REPOSITORY_MAX_ATTRIBUTE_LENGTH: {{NIFI_PROVENANCE_REPOSITORY_MAX_ATTRIBUTE_LENGTH}}
          NIFI_PROVENANCE_REPOSITORY_BUFFER_SIZE: {{NIFI_PROVENANCE_REPOSITORY_BUFFER_SIZE}}
          NIFI_COMPONENTS_STATUS_REPOSITORY_IMPLEMENTATION: {{NIFI_COMPONENTS_STATUS_REPOSITORY_IMPLEMENTATION}}
          NIFI_COMPONENTS_STATUS_REPOSITORY_BUFFER_SIZE: {{NIFI_COMPONENTS_STATUS_REPOSITORY_BUFFER_SIZE}}
          NIFI_COMPONENTS_STATUS_SNAPSHOT_FREQUENCY: {{NIFI_COMPONENTS_STATUS_SNAPSHOT_FREQUENCY}}
          NIFI_REMOTE_INPUT_HOST: {{NIFI_REMOTE_INPUT_HOST}}
          NIFI_REMOTE_INPUT_SECURE: {{NIFI_REMOTE_INPUT_SECURE}}
          NIFI_REMOTE_INPUT_SOCKET_PORT: {{NIFI_REMOTE_INPUT_SOCKET_PORT}}
          NIFI_REMOTE_INPUT_HTTP_ENABLED: {{NIFI_REMOTE_INPUT_HTTP_ENABLED}}
          NIFI_REMOTE_INPUT_HTTP_TRANSACTION_TTL: {{NIFI_REMOTE_INPUT_HTTP_TRANSACTION_TTL}}
          NIFI_WEB_WAR_DIRECTORY: {{NIFI_WEB_WAR_DIRECTORY}}
          NIFI_WEB_HTTP_HOST: {{NIFI_WEB_HTTP_HOST}}
          NIFI_WEB_HTTP_PORT: {{NIFI_WEB_HTTP_PORT}}
          NIFI_WEB_HTTP_NETWORK_INTERFACE_DEFAULT: {{NIFI_WEB_HTTP_NETWORK_INTERFACE_DEFAULT}}
          NIFI_WEB_HTTPS_HOST: {{NIFI_WEB_HTTPS_HOST}}
          NIFI_WEB_HTTPS_PORT: {{NIFI_WEB_HTTPS_PORT}}
          NIFI_WEB_HTTPS_NETWORK_INTERFACE_DEFAULT: {{NIFI_WEB_HTTPS_NETWORK_INTERFACE_DEFAULT}}
          NIFI_WEB_JETTY_WORKING_DIRECTORY: {{NIFI_WEB_JETTY_WORKING_DIRECTORY}}
          NIFI_WEB_JETTY_THREADS: {{NIFI_WEB_JETTY_THREADS}}
          NIFI_SENSITIVE_PROPS_KEY: {{NIFI_SENSITIVE_PROPS_KEY}}
          NIFI_SENSITIVE_PROPS_KEY_PROTECTED: {{NIFI_SENSITIVE_PROPS_KEY_PROTECTED}}
          NIFI_SENSITIVE_PROPS_ALGORITHM: {{NIFI_SENSITIVE_PROPS_ALGORITHM}}
          NIFI_SENSITIVE_PROPS_PROVIDER: {{NIFI_SENSITIVE_PROPS_PROVIDER}}
          NIFI_SENSITIVE_PROPS_ADDITIONAL_KEYS: {{NIFI_SENSITIVE_PROPS_ADDITIONAL_KEYS}}
          NIFI_SECURITY_KEYSTORE: {{NIFI_SECURITY_KEYSTORE}}
          NIFI_SECURITY_KEYSTORETYPE: {{NIFI_SECURITY_KEYSTORETYPE}}
          NIFI_SECURITY_KEYSTOREPASSWD: {{NIFI_SECURITY_KEYSTOREPASSWD}}
          NIFI_SECURITY_KEYPASSWD: {{NIFI_SECURITY_KEYPASSWD}}
          NIFI_SECURITY_TRUSTSTORE: {{NIFI_SECURITY_TRUSTSTORE}}
          NIFI_SECURITY_TRUSTSTORETYPE: {{NIFI_SECURITY_TRUSTSTORETYPE}}
          NIFI_SECURITY_TRUSTSTOREPASSWD: {{NIFI_SECURITY_TRUSTSTOREPASSWD}}
          NIFI_SECURITY_NEEDCLIENTAUTH: {{NIFI_SECURITY_NEEDCLIENTAUTH}}
          NIFI_SECURITY_USER_AUTHORIZER: {{NIFI_SECURITY_USER_AUTHORIZER}}
          NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER: {{NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER}}
          NIFI_SECURITY_OCSP_RESPONDER_URL: {{NIFI_SECURITY_OCSP_RESPONDER_URL}}
          NIFI_SECURITY_OCSP_RESPONDER_CERTIFICATE: {{NIFI_SECURITY_OCSP_RESPONDER_CERTIFICATE}}
          NIFI_CLUSTER_PROTOCOL_HEARTBEAT_INTERVAL: {{NIFI_CLUSTER_PROTOCOL_HEARTBEAT_INTERVAL}}
          NIFI_CLUSTER_PROTOCOL_IS_SECURE: {{NIFI_CLUSTER_PROTOCOL_IS_SECURE}}
          NIFI_CLUSTER_IS_NODE: {{NIFI_CLUSTER_IS_NODE}}
          NIFI_CLUSTER_NODE_ADDRESS: {{NIFI_CLUSTER_NODE_ADDRESS}}
          NIFI_CLUSTER_NODE_PROTOCOL_PORT: {{NIFI_CLUSTER_NODE_PROTOCOL_PORT}}
          NIFI_CLUSTER_NODE_PROTOCOL_THREADS: {{NIFI_CLUSTER_NODE_PROTOCOL_THREADS}}
          NIFI_CLUSTER_NODE_EVENT_HISTORY_SIZE: {{NIFI_CLUSTER_NODE_EVENT_HISTORY_SIZE}}
          NIFI_CLUSTER_NODE_CONNECTION_TIMEOUT: {{NIFI_CLUSTER_NODE_CONNECTION_TIMEOUT}}
          NIFI_CLUSTER_NODE_READ_TIMEOUT: {{NIFI_CLUSTER_NODE_READ_TIMEOUT}}
          NIFI_CLUSTER_FIREWALL_FILE: {{NIFI_CLUSTER_FIREWALL_FILE}}
          NIFI_CLUSTER_FLOW_ELECTION_MAX_WAIT_TIME: {{NIFI_CLUSTER_FLOW_ELECTION_MAX_WAIT_TIME}}
          NIFI_CLUSTER_FLOW_ELECTION_MAX_CANDIDATES: {{NIFI_CLUSTER_FLOW_ELECTION_MAX_CANDIDATES}}
          NIFI_ZOOKEEPER_CONNECT_STRING: {{NIFI_ZOOKEEPER_CONNECT_STRING}}
          NIFI_ZOOKEEPER_CONNECT_TIMEOUT: {{NIFI_ZOOKEEPER_CONNECT_TIMEOUT}}
          NIFI_ZOOKEEPER_SESSION_TIMEOUT: {{NIFI_ZOOKEEPER_SESSION_TIMEOUT}}
          NIFI_ZOOKEEPER_ROOT_NODE: {{NIFI_ZOOKEEPER_ROOT_NODE}}
          NIFI_KERBEROS_KRB5_FILE: {{NIFI_KERBEROS_KRB5_FILE}}
          NIFI_KERBEROS_SERVICE_PRINCIPAL: {{NIFI_KERBEROS_SERVICE_PRINCIPAL}}
          NIFI_KERBEROS_SERVICE_KEYTAB_LOCATION: {{NIFI_KERBEROS_SERVICE_KEYTAB_LOCATION}}
          NIFI_KERBEROS_SPNEGO_PRINCIPAL: {{NIFI_KERBEROS_SPNEGO_PRINCIPAL}}
          NIFI_KERBEROS_SPNEGO_KEYTAB_LOCATION: {{NIFI_KERBEROS_SPNEGO_KEYTAB_LOCATION}}
          NIFI_KERBEROS_SPNEGO_AUTHENTICATION_EXPIRATION: {{NIFI_KERBEROS_SPNEGO_AUTHENTICATION_EXPIRATION}}
          NIFI_VARIABLE_REGISTRY_PROPERTIES: {{NIFI_VARIABLE_REGISTRY_PROPERTIES}}
